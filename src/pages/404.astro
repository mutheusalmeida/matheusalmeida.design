---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Title from "@/components/Title.astro";
---

<Layout>
  <Header />

  <div class="container">
    <Title data-lang="title" as="h1" />

    <a data-lang="link"></a>
  </div>
</Layout>

<script>
  import {
    getLangFromUrl,
    useTranslations,
    l,
    normalizeLangTag,
  } from "@/js/utils";

  const url = new URL(window.location as unknown as string);
  const lang = getLangFromUrl(url);
  const t = useTranslations(lang);

  const title = document.querySelector('[data-lang="title"]')!;
  const link = document.querySelector('[data-lang="link"]')!;
  const ptSwitcher = document.querySelector('[data-lang="pt-switcher"]')!;
  const enSwitcher = document.querySelector('[data-lang="en-switcher"]')!;

  document.documentElement.lang = normalizeLangTag(lang);
  document.title = t("404.title");
  title.textContent = t("404.message");
  link.textContent = t("404.link");

  ptSwitcher.setAttribute("href", l(url, "pt-br"));
  enSwitcher.setAttribute("href", l(url, "en"));

  ptSwitcher.classList.remove("active");
  enSwitcher.classList.remove("active");

  if (lang === "en") {
    enSwitcher.classList.add("active");
  } else {
    ptSwitcher.classList.add("active");
  }

  link.setAttribute("href", lang === "en" ? "/" : `/${lang}`);
</script>

<style>
  .container {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    align-content: center;
    padding: var(--spacing-192) 0;

    & a {
      width: max-content;
    }
  }
</style>
